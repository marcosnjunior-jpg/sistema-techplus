<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sistema TechPlus</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
:root {
    --primary:#007BFF;
    --secondary:#28a745;
    --danger:#dc3545;
    --warning:#ffc107;
    --bg-light:#f0f2f5;
    --bg-dark:#121212;
    --text-light:#ffffff;
    --text-dark:#333333;
}
body {
    font-family: Arial, sans-serif;
    margin:0;
    display:flex;
    min-height:100vh;
    transition: background 0.3s, color 0.3s;
    background: var(--bg-light);
    color: var(--text-dark);
    overflow-x:hidden;
}
body.dark {
    background: var(--bg-dark);
    color: var(--text-light);
}
/* Sidebar */
.sidebar { width:220px; background: var(--primary); color:white; display:flex; flex-direction:column; position:fixed; top:0; bottom:0; padding-top:60px; transition: width 0.3s; }
.sidebar .logo { font-size:1.6em; font-weight:bold; text-align:center; position:absolute; top:0; width:100%; padding:15px 0; border-bottom:1px solid rgba(255,255,255,0.3); }
.sidebar ul { list-style:none; padding:0; margin:0; flex:1; }
.sidebar ul li { border-bottom:1px solid rgba(255,255,255,0.2); }
.sidebar ul li a { display:block; padding:15px 20px; color:white; text-decoration:none; transition: background 0.3s; cursor:pointer; }
.sidebar ul li a.active, .sidebar ul li a:hover { background:#0056b3; }
.sidebar ul li a::before { margin-right:8px; }
.sidebar ul li a[data-tab="inicio"]::before { content:"üè†"; }
.sidebar ul li a[data-tab="produtos"]::before { content:"üì¶"; }
.sidebar ul li a[data-tab="sobre"]::before { content:"‚ÑπÔ∏è"; }
.sidebar ul li a[data-tab="contato"]::before { content:"‚úâÔ∏è"; }
/* Dark toggle */
.dark-toggle { padding:10px 15px; margin:10px; border:none; border-radius:6px; cursor:pointer; background:#17a2b8; color:white; transition: transform 0.2s, background 0.3s; }
.dark-toggle:hover { transform:scale(1.05); }
/* Main content */
.main { margin-left:220px; padding:20px; flex:1; }
.tab-content { display:none; opacity:0; transform:translateY(20px); transition: opacity 0.5s, transform 0.5s; }
.tab-content.active { display:block; opacity:1; transform:translateY(0); }
/* Headings */
h2 { color:var(--primary); margin-top:0; display:flex; align-items:center; }
h2::before { content:"üñ•Ô∏è"; margin-right:8px; }
/* Cards */
.card { background:white; border-radius:10px; padding:20px; box-shadow:0 4px 12px rgba(0,0,0,0.1); transition: transform 0.4s, box-shadow 0.4s, opacity 0.5s; opacity:0; transform:translateY(20px); }
.card.show { opacity:1; transform:translateY(0); }
.card:hover { transform:translateY(-5px); box-shadow:0 6px 15px rgba(0,0,0,0.15); }
body.dark .card { background:#1e1e1e; color:white; box-shadow:0 4px 12px rgba(0,0,0,0.5); }
/* Table */
table { width:100%; border-collapse:collapse; margin-top:15px; background:white; border-radius:10px; overflow:hidden; }
th, td { border:1px solid #ddd; padding:12px; text-align:left; }
th { background:var(--primary); color:white; }
caption { font-size:1.5em; margin-bottom:10px; font-weight:bold; color:var(--primary); }
body.dark table { background:#1e1e1e; color:white; }
body.dark th { background:var(--primary); color:white; }
body.dark td { border-color:#555; }
/* Buttons */
button { padding:6px 12px; border:none; border-radius:6px; cursor:pointer; color:white; transition: transform 0.2s, background 0.3s; }
button:hover { transform:scale(1.05); }
.edit-btn { background:var(--secondary); }
.delete-btn { background:var(--danger); }
.add-btn { background:var(--primary); margin-bottom:10px; }
.export-btn { background:#17a2b8; margin-left:10px; }
/* Form */
form { display:flex; flex-wrap:wrap; gap:10px; margin-bottom:20px; }
form input, form textarea { padding:8px; border-radius:6px; border:1px solid #ccc; flex:1 1 200px; }
form label { font-weight:bold; width:100%; }
/* Modal */
.modal { display:none; position:fixed; z-index:200; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.5); justify-content:center; align-items:center; }
.modal-content { background:white; padding:25px; border-radius:8px; text-align:center; width:320px; transition: transform 0.3s; }
.modal button { margin:5px; }
body.dark .modal-content { background:#1e1e1e; color:white; }
/* Dashboard grid */
.dashboard { display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px; margin-top:20px; }
canvas { background:#f9f9f9; border-radius:8px; padding:15px; height:200px; }
body.dark canvas { background:#2c2c2c; }
/* Footer */
.footer { text-align:center; margin:20px 0; font-size:0.9em; color:#555; }
body.dark .footer { color:#aaa; }
/* Animation for new table rows */
@keyframes fadeInUp { 0% { opacity:0; transform:translateY(20px); } 100% { opacity:1; transform:translateY(0); } }
tr.new { animation: fadeInUp 0.5s ease forwards; }
</style>
</head>
<body>

<div class="sidebar">
    <div class="logo">TechPlus</div>
    <ul>
        <li><a class="tab-link active" data-tab="inicio">In√≠cio</a></li>
        <li><a class="tab-link" data-tab="produtos">Produtos</a></li>
        <li><a class="tab-link" data-tab="sobre">Sobre</a></li>
        <li><a class="tab-link" data-tab="contato">Contato</a></li>
    </ul>
    <button class="dark-toggle" id="darkToggle">Dark Mode</button>
</div>

<div class="main">
    <div id="inicio" class="tab-content active">
        <h2>Bem-vindo ao Sistema TechPlus!</h2>
        <p>Gerencie seus produtos, visualize estoque, pre√ßos m√©dios e produtos cr√≠ticos.</p>
        <div class="dashboard">
            <div class="card" id="card1"><canvas id="stockChart"></canvas></div>
            <div class="card" id="card2"><canvas id="priceChart"></canvas></div>
            <div class="card" id="card3"><canvas id="lowStockChart"></canvas></div>
        </div>
    </div>

    <div id="produtos" class="tab-content">
        <h2>Produtos</h2>
        <form id="product-form">
            <label for="nome">Nome:</label>
            <input type="text" id="nome" required>
            <label for="descricao">Descri√ß√£o:</label>
            <textarea id="descricao" rows="2" required></textarea>
            <label for="preco">Pre√ßo (R$):</label>
            <input type="number" id="preco" step="0.01" required>
            <label for="quantidade">Quantidade:</label>
            <input type="number" id="quantidade" required>
            <button type="submit" class="add-btn">Adicionar Produto</button>
            <button type="button" id="export-btn" class="export-btn">Exportar CSV</button>
        </form>

        <table id="product-table">
            <caption>Lista de Produtos</caption>
            <thead>
                <tr>
                    <th>Nome</th>
                    <th>Descri√ß√£o</th>
                    <th>Pre√ßo (R$)</th>
                    <th>Quantidade</th>
                    <th>A√ß√µes</th>
                </tr>
            </thead>
            <tbody>
                <tr class="new"><td>Notebook</td><td>16GB RAM</td><td>4500.00</td><td>5</td><td><button class="edit-btn">Editar</button> <button class="delete-btn">Excluir</button></td></tr>
                <tr class="new"><td>Smartphone</td><td>Android 128GB</td><td>2200.00</td><td>10</td><td><button class="edit-btn">Editar</button> <button class="delete-btn">Excluir</button></td></tr>
                <tr class="new"><td>Impressora</td><td>Jato de tinta</td><td>750.00</td><td>3</td><td><button class="edit-btn">Editar</button> <button class="delete-btn">Excluir</button></td></tr>
            </tbody>
        </table>
    </div>

    <div id="sobre" class="tab-content">
        <h2>Sobre</h2>
        <p>TechPlus √© um sistema inovador para controle e otimiza√ß√£o de produtos, criado por <strong>Marcos Sampaio</strong>.</p>
    </div>

    <div id="contato" class="tab-content">
        <h2>Contato</h2>
        <p>Email: <strong>suporte@techplus.com</strong><br>Telefone: (71) 3303-1155</p>
    </div>
</div>

<div id="delete-modal" class="modal">
    <div class="modal-content">
        <p>Tem certeza que deseja excluir este produto?</p>
        <button id="confirm-delete" class="delete-btn">Sim</button>
        <button id="cancel-delete" class="edit-btn">N√£o</button>
    </div>
</div>

<div class="footer">TechPlus ‚Äî inova√ß√£o e efici√™ncia no gerenciamento de produtos | Desenvolvido por <strong>Marcos Sampaio</strong></div>

<script>
const links=document.querySelectorAll('.tab-link');
const contents=document.querySelectorAll('.tab-content');
const tableBody=document.querySelector('#product-table tbody');
const form=document.getElementById('product-form');
let currentDeleteRow=null;

links.forEach(link=>link.addEventListener('click',()=>{
    links.forEach(l=>l.classList.remove('active'));
    contents.forEach(c=>c.classList.remove('active'));
    link.classList.add('active');
    document.getElementById(link.dataset.tab).classList.add('active');
    updateCharts();
}));

function attachRowEvents(row){
    row.querySelector('.edit-btn').onclick=()=>{
        document.getElementById('nome').value=row.children[0].textContent;
        document.getElementById('descricao').value=row.children[1].textContent;
        document.getElementById('preco').value=row.children[2].textContent;
        document.getElementById('quantidade').value=row.children[3].textContent;
        row.remove(); updateCharts();
    };
    row.querySelector('.delete-btn').onclick=()=>{
        currentDeleteRow=row;
        document.getElementById('delete-modal').style.display='flex';
    };
}
document.querySelectorAll('#product-table tbody tr').forEach(attachRowEvents);

form.onsubmit=e=>{
    e.preventDefault();
    const nome=document.getElementById('nome').value;
    const descricao=document.getElementById('descricao').value;
    const preco=parseFloat(document.getElementById('preco').value).toFixed(2);
    const quantidade=document.getElementById('quantidade').value;
    const row=document.createElement('tr');
    row.classList.add('new');
    row.innerHTML=`<td>${nome}</td><td>${descricao}</td><td>${preco}</td><td>${quantidade}</td><td><button class="edit-btn">Editar</button> <button class="delete-btn">Excluir</button></td>`;
    tableBody.appendChild(row);
    attachRowEvents(row);
    form.reset();
    updateCharts();
};

document.getElementById('confirm-delete').onclick=()=>{
    if(currentDeleteRow) currentDeleteRow.remove();
    document.getElementById('delete-modal').style.display='none';
    updateCharts();
};
document.getElementById('cancel-delete').onclick=()=>{document.getElementById('delete-modal').style.display='none';};

// EXPORT CSV COM BOM
document.getElementById('export-btn').onclick=()=>{
    let csv='Nome;Descri√ß√£o;Pre√ßo;Quantidade\n';
    tableBody.querySelectorAll('tr').forEach(row=>{
        const cols=row.querySelectorAll('td');
        csv+=`"${cols[0].textContent}";"${cols[1].textContent}";${cols[2].textContent};${cols[3].textContent}\n`;
    });
    const blob=new Blob(["\uFEFF"+csv],{type:'text/csv;charset=utf-8;'});
    const link=document.createElement('a');
    link.href=URL.createObjectURL(blob);
    link.download='produtos.csv';
    link.click();
};

const ctx1=document.getElementById('stockChart').getContext('2d');
const ctx2=document.getElementById('priceChart').getContext('2d');
const ctx3=document.getElementById('lowStockChart').getContext('2d');

const stockChart=new Chart(ctx1,{type:'bar',data:{labels:[],datasets:[{label:'Quantidade',data:[],backgroundColor:'#007BFF'}]},options:{plugins:{legend:{display:false}},scales:{y:{beginAtZero:true}},animation:{duration:1000}}});
const priceChart=new Chart(ctx2,{type:'line',data:{labels:[],datasets:[{label:'Pre√ßo',data:[],borderColor:'#28a745',fill:false}]},options:{plugins:{legend:{display:true}},scales:{y:{beginAtZero:true}},animation:{duration:1000}}});
const lowStockChart=new Chart(ctx3,{type:'pie',data:{labels:[],datasets:[{label:'Estoque Cr√≠tico',data:[],backgroundColor:['#dc3545','#ffc107','#28a745']}]},options:{plugins:{legend:{position:'bottom'}},animation:{duration:1000}}});

function updateCharts(){
    const rows=tableBody.querySelectorAll('tr');
    const labels=[],qty=[],prices=[],lowLabels=[],lowQty=[];
    rows.forEach(r=>{
        const nome=r.children[0].textContent;
        const preco=parseFloat(r.children[2].textContent);
        const quantidade=parseInt(r.children[3].textContent);
        labels.push(nome); qty.push(quantidade); prices.push(preco);
        if(quantidade<5){ lowLabels.push(nome); lowQty.push(quantidade); }
    });
    stockChart.data.labels=labels; stockChart.data.datasets[0].data=qty; stockChart.update();
    priceChart.data.labels=labels; priceChart.data.datasets[0].data=prices; priceChart.update();
    lowStockChart.data.labels=lowLabels; lowStockChart.data.datasets[0].data=lowQty; lowStockChart.update();
}

// Animate cards
const cards=document.querySelectorAll('.card');
cards.forEach((c,i)=>{setTimeout(()=>c.classList.add('show'),i*200);});

// Dark mode toggle
document.getElementById('darkToggle').onclick=()=>{document.body.classList.toggle('dark');};

updateCharts();
</script>
</body>
</html>
